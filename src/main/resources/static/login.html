<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Signup</title>
<style>
/* ========== CONTAINER & RESET ========== */
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Inter', sans-serif; }
body { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); display:flex; justify-content:center; align-items:center; height:100vh; }
.container {
    background-color:#ffffff;
    border-radius: 10px;
    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
    position: relative;
    overflow: hidden;
    width: 768px;
    max-width: 100%;
    min-height: 480px;
    margin-top: 30px;
}
.form-container { position:absolute; top:0; height:100%; transition: all 0.6s ease-in-out; }
.sign-in-container { left:0; width:50%; z-index:2; }
.sign-up-container { left:0; width:50%; opacity:0; z-index:1; }
.container.right-panel-active .sign-in-container { transform: translateX(100%); }
.container.right-panel-active .sign-up-container { transform: translateX(100%); opacity:1; z-index:5; animation: show 0.6s; }
@keyframes show { 0%,49.99% { opacity:0; z-index:1; } 50%,100% { opacity:1; z-index:5; } }
.overlay-container { position:absolute; top:0; left:50%; width:50%; height:100%; overflow:hidden; transition: transform 0.6s ease-in-out; z-index:100; }
.container.right-panel-active .overlay-container { transform: translateX(-100%); }
.overlay {
    background: linear-gradient(to top, #514A9D, #24C6DC);
    color:#fff;
    position: relative;
    left:-100%;
    height:100%;
    width:200%;
    transform: translateX(0);
    transition: transform 0.6s ease-in-out;
}
.container.right-panel-active .overlay { transform: translateX(50%); }
.overlay-panel {
    position:absolute;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    padding:0 40px;
    text-align:center;
    top:0;
    height:100%;
    width:50%;
    transform: translateX(0);
    transition: transform 0.6s ease-in-out;
}
.overlay-left { transform: translateX(-20%); }
.container.right-panel-active .overlay-left { transform: translateX(0); }
.overlay-right { right:0; transform: translateX(0); }
.container.right-panel-active .overlay-right { transform: translateX(20%); }
h1 { font-weight:bold; color:#fff; margin-bottom:10px; }
p { font-size:14px; font-weight:100; line-height:20px; letter-spacing:0.5px; margin:20px 0 30px; }
span { font-size:12px; }
a { color:#fff; font-size:14px; text-decoration:none; margin:15px 0; }
form {
    background-color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:0 50px;
    height:100%;
    text-align:center;
}
input {
    background-color:#eee;
    border:none;
    padding:12px 15px;
    margin:8px 0;
    width:100%;
    border-radius:5px;
}
button {
    border-radius:20px;
    border:none;
    background-color:#ff4b2b;
    color:#fff;
    font-size:12px;
    font-weight:bold;
    padding:12px 45px;
    letter-spacing:1px;
    text-transform:uppercase;
    cursor:pointer;
    transition: transform 80ms ease-in;
    margin-top:10px;
}
button:active { transform: scale(0.95); }
button:focus { outline:none; }
button.ghost { background-color:transparent; border:1px solid #fff; }
.notification { position: fixed; top:2rem; right:2rem; padding:1rem 1.5rem; border-radius:10px; color:#fff; z-index:1000; max-width:300px; }
.notification.success { background:#10b981; }
.notification.error { background:#ef4444; }
#info { margin-top:1rem; text-align:center; font-size:12px; color:#333; }
</style>
</head>
<body>

<div class="container" id="container">
    <div class="form-container sign-up-container">
        <form id="signup-form">
            <h1>Sign Up</h1>
            <span>Use your email for registration</span>
            <input type="text" id="signup-username" placeholder="Name" required />
            <input type="email" id="signup-email" placeholder="Email" required />
            <input type="password" id="signup-password" placeholder="Password" required />
            <button type="submit">Sign Up</button>
        </form>
    </div>
    <div class="form-container sign-in-container">
        <form id="login-form">
            <h1>Sign In</h1>
            <span>Use your email account</span>
            <input type="text" id="login-username" placeholder="Email" required />
            <input type="password" id="login-password" placeholder="Password" required />
            <a href="#">Forgot your password?</a>
            <button type="submit">Sign In</button>
        </form>
    </div>
    <div class="overlay-container">
        <div class="overlay">
            <div class="overlay-panel overlay-left">
                <h1>Welcome Back!</h1>
                <p>To stay connected, please login with your info</p>
                <button class="ghost" id="SignIn">Sign In</button>
            </div>
            <div class="overlay-panel overlay-right">
                <h1>Hello, Friend!</h1>
                <p>Enter your details and start your journey with us</p>
                <button class="ghost" id="SignUp">Sign Up</button>
            </div>
        </div>
    </div>
</div>



<script>
const API_BASE_URL = '/api/auth';

const SignUpButton = document.getElementById("SignUp");
const SignInButton = document.getElementById("SignIn");
const container = document.getElementById("container");

SignUpButton.addEventListener('click', () => container.classList.add("right-panel-active"));
SignInButton.addEventListener('click', () => container.classList.remove("right-panel-active"));

function showNotification(msg, type) {
    const existing = document.querySelector('.notification');
    if(existing) existing.remove();
    const n = document.createElement('div');
    n.className = `notification ${type}`;
    n.textContent = msg;
    document.body.appendChild(n);
    setTimeout(()=>n.remove(), 3000);
}
function showSuccess(msg){ showNotification(msg,'success'); }
function showError(msg){ showNotification(msg,'error'); }

// LOGIN
async function loginUser(e) {
    e.preventDefault();
    const email = document.getElementById('login-username').value.trim();
    const password = document.getElementById('login-password').value.trim();
    if(!email || !password) return showError('Please enter both fields.');
    try {
        const res = await fetch(`${API_BASE_URL}/login`, {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ username: email, password })
        });
        if(res.ok){
            const data = await res.json();
            localStorage.setItem('jwtToken', data.token);
            showSuccess('Login successful!');
            window.location.href = '/index.html';
        } else {
            const errRes = await res.json().catch(()=>({error:'Login failed.'}));
            showError(errRes.error || 'Login failed.');
        }
    } catch(err) { console.error(err); showError('Login failed. Try again.'); }
}

// SIGNUP
async function signupUser(e) {
    e.preventDefault();
    const username = document.getElementById('signup-username').value.trim();
    const email = document.getElementById('signup-email').value.trim();
    const password = document.getElementById('signup-password').value.trim();
    if(!username || !email || !password) return showError('Please fill all fields.');
    try {
        const res = await fetch(`${API_BASE_URL}/signup`, {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ username, email, password })
        });
        if(res.ok){
            showSuccess('Signup successful! You can now login.');
            document.getElementById('signup-form').reset();
            container.classList.remove("right-panel-active");
        } else {
            const errRes = await res.json().catch(()=>({error:'Signup failed.'}));
            showError(errRes.error || 'Signup failed.');
        }
    } catch(err) { console.error(err); showError('Signup failed. Try again.'); }
}

document.addEventListener('DOMContentLoaded', ()=>{
    document.getElementById('login-form').addEventListener('submit', loginUser);
    document.getElementById('signup-form').addEventListener('submit', signupUser);
});
</script>

</body>
</html>
